include:
  - remote: https://arp.to/@ci/docker.yml

coinbox-bitcoin:
  stage: build
  variables:
    IMAGE_DIR: coinbox/bitcoin
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

coinbox-filecoin:
  stage: build
  variables:
    IMAGE_DIR: coinbox/filecoin
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

coinbox-litecoin:
  stage: build
  variables:
    IMAGE_DIR: coinbox/litecoin
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

coinbox-monero:
  stage: build
  variables:
    IMAGE_DIR: coinbox/monero
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

devel-docker:
  stage: build
  variables:
    IMAGE_DIR: devel/docker
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

devel-s3fs:
  stage: build
  variables:
    IMAGE_DIR: devel/s3fs
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

network-shadowsocks:
  stage: build
  variables:
    IMAGE_DIR: network/shadowsocks
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

toolkit:
  stage: build
  variables:
    IMAGE_DIR: toolkit
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make

toolkit-hashicorp:
  stage: build
  variables:
    IMAGE_DIR: toolkit
    IMAGE_TAG: hashicorp
    IMAGE_FILE: Dockerfile.hashicorp
  only:
    changes:
      - $IMAGE_DIR/**/*
  script:
    - make
