include:
  - remote: https://arp.to/@ci/docker.yml

coinbox-bitcoin:
  stage: build
  only:
    changes:
      - coinbox/bitcoin/**/*
  variables:
    IMAGE_NAME: bitcoin
    IMAGE_DIR: coinbox/bitcoin
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push

coinbox-filecoin:
  stage: build
  only:
    changes:
      - coinbox/filecoin/**/*
  variables:
    IMAGE_NAME: filecoin
    IMAGE_DIR: coinbox/filecoin
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push

coinbox-litecoin:
  stage: build
  only:
    changes:
      - coinbox/litecoin/**/*
  variables:
    IMAGE_NAME: litecoin
    IMAGE_DIR: coinbox/litecoin
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push

coinbox-monero:
  stage: build
  only:
    changes:
      - coinbox/monero/**/*
  variables:
    IMAGE_NAME: monero
    IMAGE_DIR: coinbox/monero
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push

devel-docker:
  stage: build
  only:
    changes:
      - devel/docker/**/*
  variables:
    IMAGE_NAME: docker
    IMAGE_DIR: devel/docker
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push

devel-s3fs:
  stage: build
  only:
    changes:
      - devel/s3fs/**/*
  variables:
    IMAGE_NAME: s3fs
    IMAGE_DIR: devel/s3fs
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push

network-shadowsocks:
  stage: build
  only:
    changes:
      - network/shadowsocks/**/*
  variables:
    IMAGE_NAME: shadowsocks
    IMAGE_DIR: network/shadowsocks
  script:
    - make -f $CI_PROJECT_DIR/Makefile build-and-push
